//====================================================================
//							c102_r0301
//						カイナ・姓名判断氏
//====================================================================

//--------------------------------------------------------------------
//      			マップでの特殊イベント指定
//--------------------------------------------------------------------
EVENT_DATA_START	c102_r0301_event_data
EVENT_DATA_END		/*特別なイベントなし*/


//--------------------------------------------------------------------
//       				スクリプト本体
//--------------------------------------------------------------------

/********************************************************************/
/*							姓名判断氏								*/
//
//	PARAM0 = ポケモンリストで選んだ値
/********************************************************************/
SCRIPT_LABEL	ev_oldman1_01_p01_c102_r0301
	_TALK_OBJ_START

	_TALK_YES_NO	msg_oldman1_01_p01_c102_r0301
	_IFVAL_JUMP		ANSWORK,EQ,1,yes_oldman1_01_p02_c102_r0301	//「はい」
	_IFVAL_JUMP		ANSWORK,EQ,0,no_oldman1_01_p02_c102_r0301	//「いいえ」
	_END

//--------------------------------------------------------------------
//ニックネーム占う「はい」
//--------------------------------------------------------------------
yes_oldman1_01_p02_c102_r0301:
	_TALK_KEYWAIT	msg_oldman1_01_p02_c102_r0301

	//ポケモンを選ぶ画面
	_PROGRAM		NAME_POKE_LIST
	_STOP_SCRIPT

	_IFVAL_JUMP		PARAM0,NE,0xff,yes_oldman1_01_p03_c102_r0301//選んだ
	_IFVAL_JUMP		PARAM0,EQ,0xff,no_oldman1_01_p02_c102_r0301	//「いいえ」
	_END

//--------------------------------------------------------------------
//ニックネーム占う「いいえ」
//ポケモン選ぶ画面で「いいえ」
//--------------------------------------------------------------------
no_oldman1_01_p02_c102_r0301:
	_TALK_KEYWAIT	msg_oldman1_01_p06_c102_r0301
	_TALK_OBJ_END
	_END

//--------------------------------------------------------------------
//ポケモン選ぶ画面でポケモンを選んだ
//--------------------------------------------------------------------
yes_oldman1_01_p03_c102_r0301:
	//選んだポケモンがタマゴか
	_FUNC_CALL		ANSWORK,GET_LISTNO_POKENO
	_IFVAL_JUMP		ANSWORK,EQ,MONSNO_TAMAGO,tamago_oldman1_01_p01_c102_r0301

	//＠０にPokeParaMine[ScriptParameter0]のニックネーム代入
	_PROGRAM		SET_MY_POKENAME

	//トレーナーID比較
	_PROGRAM		ID_CHK

	//選んだポケモンが他人からもらったポケモンか
	_IFVAL_JUMP		ANSWORK,EQ,1,yes_oldman1_01_p04_c102_r0301//他人の

	//親名比較
	_FUNC_CALL		ANSWORK,OYANAME_CHK

	//親名比較で＠０が変更されるので
	//＠０にPokeParaMine[ScriptParameter0]のニックネーム代入
	_PROGRAM		SET_MY_POKENAME

	//選んだポケモンが他人からもらったポケモンか
	_IFVAL_JUMP		ANSWORK,EQ,1,yes_oldman1_01_p04_c102_r0301//他人の

	_TALK_YES_NO	msg_oldman1_01_p03_c102_r0301
	_IFVAL_JUMP		ANSWORK,EQ,1,yes_oldman1_01_p05_c102_r0301//「はい」
	_IFVAL_JUMP		ANSWORK,EQ,0,no_oldman1_01_p02_c102_r0301 //「いいえ」
	_END

//選んだポケモンがタマゴ
tamago_oldman1_01_p01_c102_r0301:
	_TALK_KEYWAIT	msg_oldman1_01_p09_c102_r0301
	_TALK_OBJ_END
	_END

//--------------------------------------------------------------------
//他人からもらったポケモンなので名前を変更できない
//--------------------------------------------------------------------
yes_oldman1_01_p04_c102_r0301:
	_TALK_KEYWAIT	msg_oldman1_01_p08_c102_r0301
	_TALK_OBJ_END
	_END

//--------------------------------------------------------------------
//ニックネームを変更する
//--------------------------------------------------------------------
yes_oldman1_01_p05_c102_r0301:
	_TALK_KEYWAIT	msg_oldman1_01_p04_c102_r0301

	//名前入力画面
	//変更する前のニックネームを＠２に格納して、NameIn呼び出す(＠１も使用している)
	_CALL			ev_new_poke_nick_name_script

	//ニックネームを変更したかチェック
	//変更していたらTVデータ作成関数も読んでいる
	_FUNC_CALL		ANSWORK,NICKNAME_CHK

	//＠０にPokeParaMine[ScriptParameter0]のニックネーム代入
	_PROGRAM		SET_MY_POKENAME

	//ニックネームを変更していたら
	_IFVAL_JUMP		ANSWORK,EQ,1,yes_oldman1_01_p06_c102_r0301

	_TALK_KEYWAIT	msg_oldman1_01_p07_c102_r0301
	_TALK_OBJ_END
	_END

//--------------------------------------------------------------------
//ニックネームを変更した
//--------------------------------------------------------------------
yes_oldman1_01_p06_c102_r0301:
	_TALK_KEYWAIT	msg_oldman1_01_p05_c102_r0301
	_TALK_OBJ_END
	_END


